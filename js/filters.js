import data from"./data.js";import noUiSlider from"nouislider";const searchInput=document.querySelector("#search-input"),toyCounter=document.querySelector("#toy-counter"),sortForm=document.querySelector("#sort"),bellForm=document.querySelector("#bell-form"),ballForm=document.querySelector("#ball-form"),pineForm=document.querySelector("#pine-form"),snowflakeForm=document.querySelector("#snowflake-form"),toyForm=document.querySelector("#toy-form"),whiteColorForm=document.querySelector("#color-white"),yellowColorForm=document.querySelector("#color-yellow"),redColorForm=document.querySelector("#color-red"),blueColorForm=document.querySelector("#color-blue"),greenColorForm=document.querySelector("#color-green"),bigSizeForm=document.querySelector("#size-big"),middleSizeForm=document.querySelector("#size-middle"),smallSizeForm=document.querySelector("#size-small"),onlyFavoritesForm=document.querySelector("#favorites-checkbox");var sliderCopies=document.getElementById("slider-copies"),sliderYear=document.getElementById("slider-year");const sliderCopiesCont=document.querySelector("#slider-copies-cont"),sliderYearCont=document.querySelector("#slider-year-cont"),sliderCopiesCounterStart=document.querySelector("#slider-copies-counter-start"),sliderCopiesCounterEnd=document.querySelector("#slider-copies-counter-end"),sliderYearCounterStart=document.querySelector("#slider-year-counter-start"),sliderYearCounterEnd=document.querySelector("#slider-year-counter-end"),colorItems=document.querySelector(".colors-cont"),toyCards=document.querySelector("#toy-cards"),resetSettings=document.querySelector("#reset-settings");let renderNumArr=[],checkedFormsArr=[],checkedColorsArr=[],checkedSizeArr=[],checkedFavoritesArr=[],bellChecked="no",ballChecked="no",pineChecked="no",snowflakeChecked="no",toyChecked="no",copiesCounterStart=1,copiesCounterEnd=12,yearCounterStart=1940,yearCounterEnd=2020,whiteChecked="no",yellowChecked="no",redChecked="no",blueChecked="no",greenChecked="no",bigSizeChecked="no",middleSizeChecked="no",smallSizeChecked="no",onlyFavoritesChecked="no",setElect=new Set;function createToyCard(e){const r=document.createElement("div");r.classList.add("toy-card-item"),r.setAttribute("data-card-id",e);const o=document.createElement("p");o.classList.add("toy-name"),o.innerHTML=data[e].name,r.appendChild(o);const t=document.createElement("img");t.classList.add("toy-image"),t.src=`./toys/${e+1}.png`,t.width=85,t.height=85,r.appendChild(t);const c=document.createElement("p");c.classList.add("toy-count"),c.innerHTML="Количество: "+data[e].count,r.appendChild(c);const l=document.createElement("p");l.classList.add("toy-year"),l.innerHTML="Год выпуска: "+data[e].year+" год",r.appendChild(l);const s=document.createElement("p");s.classList.add("toy-shape"),s.innerHTML="Форма игрушки: "+data[e].shape,r.appendChild(s);const n=document.createElement("p");n.classList.add("toy-color"),n.innerHTML="Цвет игрушки: "+data[e].color,r.appendChild(n);const d=document.createElement("p");d.classList.add("toy-size"),d.innerHTML="Размер игрушки: "+data[e].size,r.appendChild(d);const i=document.createElement("p");let a;i.classList.add("toy-favorite"),a=1==data[e].favorite?"да":"нет",i.innerHTML="Редкий товар: "+a,r.appendChild(i),toyCards.appendChild(r);let m=r.getAttribute("data-card-id");r.addEventListener("click",(()=>{setElect.has(m)?(r.classList.remove("toy-card-item-elect"),setElect.delete(m)):setElect.size<20?(r.classList.add("toy-card-item-elect"),setElect.add(m)):(toyCounter.classList.add("toy-counter-alert"),setTimeout((()=>{toyCounter.classList.remove("toy-counter-alert")}),1500)),toyCounter.innerHTML=setElect.size})),setElect.has(m)&&r.classList.add("toy-card-item-elect")}function renderCards(e){toyCards.innerHTML="";for(let r of e)createToyCard(r);if("0"==e.length){const e=document.createElement("div");e.classList.add("no-match-alert"),e.innerHTML="Увы, таких игрушек в коллекции нет&#128532;",toyCards.appendChild(e)}}function checkFilterForms(e,r,o,t,c){"yes"==e&&checkedFormsArr.push("колокольчик"),"yes"==r&&checkedFormsArr.push("шар"),"yes"==o&&checkedFormsArr.push("шишка"),"yes"==t&&checkedFormsArr.push("снежинка"),"yes"==c&&checkedFormsArr.push("фигурка"),0==checkedFormsArr.length&&(checkedFormsArr=["колокольчик","шар","шишка","снежинка","фигурка"])}function checkFilterColors(e,r,o,t,c){"yes"==e&&checkedColorsArr.push("белый"),"yes"==r&&checkedColorsArr.push("желтый"),"yes"==o&&checkedColorsArr.push("красный"),"yes"==t&&checkedColorsArr.push("синий"),"yes"==c&&checkedColorsArr.push("зелёный"),0==checkedColorsArr.length&&(checkedColorsArr=["белый","желтый","красный","синий","зелёный"])}function checkFilterSizes(e,r,o){"yes"==e&&checkedSizeArr.push("большой"),"yes"==r&&checkedSizeArr.push("средний"),"yes"==o&&checkedSizeArr.push("малый"),0==checkedSizeArr.length&&(checkedSizeArr=["большой","средний","малый"])}function checkFilterFavorites(e){checkedFavoritesArr="yes"==e?[!0]:[!0,!1]}function allFilters(e){let r=e.slice();checkedFormsArr=[],checkFilterForms(bellChecked,ballChecked,pineChecked,snowflakeChecked,toyChecked),r=r.filter((e=>checkedFormsArr.includes(e.shape))),r=r.filter((e=>e.count>=copiesCounterStart&&e.count<=copiesCounterEnd)),r=r.filter((e=>e.year>=yearCounterStart&&e.year<=yearCounterEnd)),checkedColorsArr=[],checkFilterColors(whiteChecked,yellowChecked,redChecked,blueChecked,greenChecked),r=r.filter((e=>checkedColorsArr.includes(e.color))),checkedSizeArr=[],checkFilterSizes(bigSizeChecked,middleSizeChecked,smallSizeChecked),r=r.filter((e=>checkedSizeArr.includes(e.size))),checkedFavoritesArr=[],checkFilterFavorites(onlyFavoritesChecked),r=r.filter((e=>checkedFavoritesArr.includes(e.favorite))),""!=searchInput.value&&(r=r.filter((e=>e.name.toLowerCase().includes(searchInput.value.toLowerCase())))),"sort-by-name-down"==sortForm.value&&r.sort((function(e,r){let o=e.name.toLowerCase(),t=r.name.toLowerCase();return o<t?-1:o>t?1:0})),"sort-by-name-up"==sortForm.value&&r.sort((function(e,r){let o=e.name.toLowerCase(),t=r.name.toLowerCase();return t<o?-1:t>o?1:0})),"sort-by-year-up"==sortForm.value&&r.sort(((e,r)=>e.year-r.year)),"sort-by-year-down"==sortForm.value&&r.sort(((e,r)=>r.year-e.year)),renderNumArr=[],r.forEach((e=>renderNumArr.push(Number(e.num-1)))),renderCards(renderNumArr)}function clearFilters(){renderNumArr=[],checkedFormsArr=[],checkedColorsArr=[],checkedSizeArr=[],checkedFavoritesArr=[],bellChecked="no",ballChecked="no",pineChecked="no",snowflakeChecked="no",toyChecked="no",copiesCounterStart=1,copiesCounterEnd=12,yearCounterStart=1940,yearCounterEnd=2020,whiteChecked="no",yellowChecked="no",redChecked="no",blueChecked="no",greenChecked="no",bigSizeChecked="no",middleSizeChecked="no",smallSizeChecked="no",onlyFavoritesChecked="no",bellForm.classList.remove("toy-form-item-active"),ballForm.classList.remove("toy-form-item-active"),pineForm.classList.remove("toy-form-item-active"),snowflakeForm.classList.remove("toy-form-item-active"),toyForm.classList.remove("toy-form-item-active"),sliderCopies.noUiSlider.set([1,12]),sliderYear.noUiSlider.set([1940,2020]),sliderCopiesCounterStart.innerHTML=1,sliderCopiesCounterEnd.innerHTML=12,sliderYearCounterStart.innerHTML=1940,sliderYearCounterEnd.innerHTML=2020,whiteColorForm.classList.remove("checkbox"),yellowColorForm.classList.remove("checkbox"),redColorForm.classList.remove("checkbox"),blueColorForm.classList.remove("checkbox"),greenColorForm.classList.remove("checkbox"),bigSizeForm.classList.remove("checkbox-alt"),middleSizeForm.classList.remove("checkbox-alt"),smallSizeForm.classList.remove("checkbox-alt"),onlyFavoritesForm.classList.remove("checkbox-alt"),toyCards.innerHTML="",allFilters(data)}noUiSlider.create(sliderCopies,{start:[1,12],step:1,connect:!0,range:{min:[1],max:[12]}}),noUiSlider.create(sliderYear,{start:[1940,2020],step:10,connect:!0,range:{min:[1940],max:[2020]}}),searchInput.addEventListener("keyup",(()=>{allFilters(data)})),sortForm.addEventListener("change",(()=>{allFilters(data)})),bellForm.addEventListener("click",(()=>{bellForm.classList.toggle("toy-form-item-active"),bellChecked="no"==bellChecked?"yes":"no",allFilters(data)})),ballForm.addEventListener("click",(()=>{ballForm.classList.toggle("toy-form-item-active"),ballChecked="no"==ballChecked?"yes":"no",allFilters(data)})),pineForm.addEventListener("click",(()=>{pineForm.classList.toggle("toy-form-item-active"),pineChecked="no"==pineChecked?"yes":"no",allFilters(data)})),snowflakeForm.addEventListener("click",(()=>{snowflakeForm.classList.toggle("toy-form-item-active"),snowflakeChecked="no"==snowflakeChecked?"yes":"no",allFilters(data)})),toyForm.addEventListener("click",(()=>{toyForm.classList.toggle("toy-form-item-active"),toyChecked="no"==toyChecked?"yes":"no",allFilters(data)})),sliderCopiesCont.addEventListener("click",(()=>{let e=sliderCopies.noUiSlider.get();sliderCopiesCounterStart.innerHTML=Math.round(e[0]),sliderCopiesCounterEnd.innerHTML=Math.round(e[1]),copiesCounterStart=Math.round(e[0]),copiesCounterEnd=Math.round(e[1]),allFilters(data)})),sliderYearCont.addEventListener("click",(()=>{let e=sliderYear.noUiSlider.get();sliderYearCounterStart.innerHTML=Math.round(e[0]),sliderYearCounterEnd.innerHTML=Math.round(e[1]),yearCounterStart=Math.round(e[0]),yearCounterEnd=Math.round(e[1]),allFilters(data)})),colorItems.addEventListener("click",(e=>{e.target.classList.toggle("checkbox"),allFilters(data)})),whiteColorForm.addEventListener("click",(()=>{whiteChecked="no"==whiteChecked?"yes":"no"})),yellowColorForm.addEventListener("click",(()=>{yellowChecked="no"==yellowChecked?"yes":"no"})),redColorForm.addEventListener("click",(()=>{redChecked="no"==redChecked?"yes":"no"})),blueColorForm.addEventListener("click",(()=>{blueChecked="no"==blueChecked?"yes":"no"})),greenColorForm.addEventListener("click",(()=>{greenChecked="no"==greenChecked?"yes":"no"})),bigSizeForm.addEventListener("click",(()=>{bigSizeForm.classList.toggle("checkbox-alt"),bigSizeChecked="no"==bigSizeChecked?"yes":"no",allFilters(data)})),middleSizeForm.addEventListener("click",(()=>{middleSizeForm.classList.toggle("checkbox-alt"),middleSizeChecked="no"==middleSizeChecked?"yes":"no",allFilters(data)})),smallSizeForm.addEventListener("click",(()=>{smallSizeForm.classList.toggle("checkbox-alt"),smallSizeChecked="no"==smallSizeChecked?"yes":"no",allFilters(data)})),onlyFavoritesForm.addEventListener("click",(()=>{onlyFavoritesForm.classList.toggle("checkbox-alt"),onlyFavoritesChecked="no"==onlyFavoritesChecked?"yes":"no",allFilters(data)})),resetSettings.addEventListener("click",(()=>{clearFilters()})),allFilters(data);export default setElect;